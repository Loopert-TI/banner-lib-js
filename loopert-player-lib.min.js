function loadScript(e,t={}){return new Promise(((r,n)=>{if(document.querySelector(`script[src="${e}"]`))return void r();const o=document.createElement("script");o.src=e,Object.keys(t).forEach((e=>{o.setAttribute(e,t[e])})),o.onload=()=>r(),o.onerror=()=>n(new Error(`Falha ao carregar ${e}`)),document.head.appendChild(o)}))}function extractDataAttributes(e){const t={};return Object.entries(e.dataset).forEach((([e,r])=>{const n=`data-${e.replace(/([A-Z])/g,"-$1").toLowerCase()}`;t[n]=r})),t}function findLoopertScripts(){return Array.from(document.querySelectorAll('script[src*="loopert-player-lib.min"]'))}class LoopertPlayer{constructor(e={}){this.options={id:"player",streamUrl:"",backgroundImage:"",backgroundColor:"#2E5EAA",borderColor:"#2E5EAA",...e},this.player=null,this.init()}createPlayerDiv(){let e=document.getElementById(this.options.id);e||(e=document.createElement("div"),e.id=this.options.id,document.body.appendChild(e))}async init(){try{this.createPlayerDiv(),await this.loadDependencies(),this.initPlayer()}catch(e){console.error("Erro ao inicializar LoopertPlayer:",e)}}async loadDependencies(){const e=[];if(window.Playerjs||e.push(loadScript("https://cdn.jsdelivr.net/gh/Loopert-TI/banner-lib-js@latest/player.min.js")),!window.LoopertBannerLib){const t=findLoopertScripts();if(0===t.length)return;const r=extractDataAttributes(t[0]);e.push(loadScript("https://cdn.jsdelivr.net/gh/Loopert-TI/banner-lib-js@latest/loopert-banner-lib.min.js",r))}await Promise.all(e)}initPlayer(){if(!window.Playerjs)throw new Error("Playerjs n√£o est√° dispon√≠vel");window.PlayerjsEvents=(e,t,r)=>{this.handlePlayerEvents(e,t,r)},this.player=new window.Playerjs({id:this.options.id,file:this.options.streamUrl,poster:this.options.backgroundImage,...this.getPlayerJsOptions()});const e=document.getElementById("player");document.getElementById("oframeplayer").style.backgroundColor=this.options.backgroundColor,e.style.borderColor=this.options.borderColor}getPlayerJsOptions(){const e={...this.options};return delete e.streamUrl,e}handlePlayerEvents(e,t,r){switch(e){case"play":this.onPlay(t,r);break;case"pause":this.onPause(t,r);break;case"ended":this.onEnded(t,r);break;default:this.onGenericEvent(e,t,r)}this.options.onEvent&&"function"==typeof this.options.onEvent&&this.options.onEvent(e,t,r)}onPlay(e,t){this.initBanner()}onPause(e,t){}onEnded(e,t){}onGenericEvent(e,t,r){}initBanner(){if(window.LoopertBannerLib)try{window.LoopertBannerLib.init()}catch(e){console.error("Erro ao inicializar banner:",e)}}play(){this.player&&this.player.api&&this.player.api("play")}pause(){this.player&&this.player.api&&this.player.api("pause")}stop(){this.player&&this.player.api&&this.player.api("stop")}setVolume(e){this.player&&this.player.api&&this.player.api("volume",e)}setFile(e){this.player&&this.player.api&&this.player.api("file",e)}destroy(){this.player&&this.player.api&&this.player.api("destroy"),this.player=null}getPlayer(){return this.player}}!function(){"use strict";function e(){window.LoopertBannerLib.init()}function t(e,r=window){const n=r.document.getElementById(e);if(n)return n;for(let n=0;n<r.frames.length;n++)try{const o=t(e,r.frames[n]);if(o)return o}catch(e){console.warn("N√£o foi poss√≠vel acessar frame:",e)}return null}function r(){const r=findLoopertScripts();if(0===r.length)return;const n=r[0].dataset.playerId;if(!n)return;let o=0;function a(){o++;const r=t(n);return!!r&&(console.log(`üéØ Elemento encontrado: #${n} na tentativa ${o}`),r.dataset.listenerAdded||(r.addEventListener("play",e),r.dataset.listenerAdded="true"),!0)}if(a())return;const i=setInterval((()=>{(a()||o>=50)&&(o>=50&&console.warn(`‚ö†Ô∏è Elemento #${n} n√£o encontrado ap√≥s 50 tentativas`),clearInterval(i))}),1e3)}async function n(){try{await async function(){const e=findLoopertScripts();if(0===e.length)return;const t=[];if(!window.LoopertBannerLib){const r=extractDataAttributes(e[0]);t.push(loadScript("https://cdn.jsdelivr.net/gh/Loopert-TI/banner-lib-js@latest/loopert-banner-lib.min.js",r))}try{await Promise.all(t)}catch(e){throw console.error("Erro ao carregar depend√™ncias:",e),e}}(),r(),document.dispatchEvent(new CustomEvent("loopertPlayerReady",{detail:{timestamp:Date.now()}}))}catch(e){document.dispatchEvent(new CustomEvent("loopertPlayerError",{detail:{error:e.message,timestamp:Date.now()}}))}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}();